---
title: "第06章 指针和引用"
date: 2022-09-26T21:56:17+08:00
draft: false
weight: 6
---

## 智能指针
### `unique_ptr<T>`  
- 唯一对象指针
```cpp
std::unique_ptr<double> pdata { new double { 999.0 } };

std::unique_ptr<double> pdata { std::make_unique<double> ( 999.0 ) };

auto pdata { std::make_unique<double> ( 999.0 ) };
```
- 不能复制`unique_ptr<>`，但是可以用`std::move()`转移
- `reset()`可以重置其指向的地址，甚至是`nullptr`
- `release()`可能造成内存泄露，要额外小心。调用时一定要保存得到的原始指针。
### `shared_ptr<T>`
- 不仅需要保存原始指针指向的内容，还需要保存引用计数
```cpp
auto pdata { std::make_shared<double> ( 999.0 ) };
```
- `shared_ptr`可以用另一个`shared_ptr`复制得到，会增加引用计数