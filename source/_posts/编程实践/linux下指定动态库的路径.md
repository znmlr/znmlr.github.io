---
title: linux下指定动态库的路径
tags:
  - linux
  - gcc
categories:
  - 编程实践
abbrlink: f5dcdcc5
date: 2018-05-05 13:19:57
---

# 指定加载路径的方法

## 配置/etc/ld.so.conf文件 

可以通过编辑配置文件/etc/ld.so.conf来指定动态库的搜索路径，该文件中每行为一个动态库搜索路径。每次编辑完该文件后，都必须运行命令ldconfig使修改后的配置生效 

  <!--more-->

## 配置环境变量LD_LIBRARY_PATH 

通过设定环境变量LD_LIBRARY_PATH也可以指定动态库搜索路径。当通过该环境变量指定多个动态库搜索路径时，路径之间用冒号"："分隔 

## 编译目标代码时指定 

还可以在编译目标代码时指定程序的动态库搜索路径。-Wl,表示后面的参数将传给link程序ld（因为gcc可能会自动调用ld）。这里通过gcc的参数"-Wl,-rpath,"指定。当指定多个动态库搜索路径时，路径之间用冒号"："分隔 

# 动态库搜索顺序

> 先后顺序如下：

- 编译目标代码时指定的动态库搜索路径 
- 环境变量LD_LIBRARY_PATH指定的动态库搜索路径 
- 配置文件/etc/ld.so.conf中指定的动态库搜索路径 
- 默认的动态库搜索路径/lib 
- 默认的动态库搜索路径/usr/lib 

